<!doctype html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Add Customer</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"
          integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">

    <link rel="stylesheet" th:href="@{/css/style.css}"/>

</head>
<body>

<!-- Admin sidebar-->
<div th:replace="~{fragments/admin-sidebar::adminSidebar}"></div>
<!-- Admin sidebar-->

<div class="container">
    <h2 class="pt-4 px-3">Customer Management</h2>
    <section class="m-5 row justify-content-center">

        <div class="card shadow p-5" style="width:40%">

            <div th:if="${successMsg}" class="mb-2 alert alert-success" role="alert">
                <span th:text="${successMsg}"></span>
            </div>
            <div th:if="${errorMsg}" class="mb-2 alert alert-danger" role="alert">
                <span th:text="${errorMsg}"></span>
            </div>

            <form action="regForm" method="post" onsubmit="return validateForm()" th:object="${user}">
                <h3 class="text-center mb-2">Add New Customer</h3>
                <input type="text" name="isCustomer" value="customer" hidden>
                <label for="exampleInputEmail1" class="form-label"
                >Name :</label
                >
                <input
                        type="text"
                        class="form-control"
                        id="exampleInputEmail1"
                        name="name"
                        th:field="*{name}"
                        required
                />
                <div class="text-danger" th:if="${#fields.hasErrors('name')}" th:errors="*{name}"></div>
                <div class="mb-2">
                    <label for="exampleInputEmail1" class="form-label"
                    >Email ID :</label
                    >
                    <input
                            type="email"
                            class="form-control"
                            name="email"
                            aria-describedby="emailHelp"
                            th:field="*{email}"
                            required
                    />
                    <div class="text-danger" th:if="${#fields.hasErrors('email')}" th:errors="*{email}"></div>
                </div>
                <div class="mb-2">
                    <label for="exampleInputPassword1" class="form-label"
                    >Password :</label
                    >
                    <input
                            type="password"
                            class="form-control"
                            id="exampleInputPassword1"
                            name="password"
                            th:field="*{password}"
                            required
                    />
                    <div class="text-danger" th:if="${#fields.hasErrors('password')}" th:errors="*{password}"></div>
                </div>
                <div class="mb-2">
                    <label for="exampleInputEmail1" class="form-label"
                    >Phone NO :</label
                    >
                    <input
                            type="text"
                            class="form-control"
                            name="phoneno"
                            aria-describedby="emailHelp"
                            th:field="*{phoneno}"
                            required
                    />
                    <div class="text-danger" th:if="${#fields.hasErrors('phoneno')}" th:errors="*{phoneno}"></div>
                </div>
                <div class="mb-2">
                    <label for="exampleInputEmail1" class="form-label"
                    >City :</label
                    >
                    <input
                            type="text"
                            class="form-control"
                            name="city"
                            aria-describedby="emailHelp"
                            th:field="*{city}"
                            required
                    />
                    <div class="text-danger" th:if="${#fields.hasErrors('city')}" th:errors="*{city}"></div>
                </div>
                <button type="submit" class="btn btn-primary mt-3">
                    Add Customer
                </button>
            </form>
        </div>
    </section>
</div>
<!-- VALIDATION STARTS-->
<script type="text/javascript">
    function validateForm() {
        var name = document.forms[0]["name"].value;
        var namePattern = /^[a-z,A-Z ]{5,25}$/;

        var email = document.forms[0]["email"].value;
        var emailPattern = /^[a-zA-Z0-9._%Â±]+@[a-zA-Z0-9.-]+.[a-zA-Z]{2,}$/;

        var password = document.forms[0]["password"].value;
        var passwordPattern = /^[a-z,A-Z,0-9]{5,25}$/;

        var phoneno = document.forms[0]["phoneno"].value;
        var phonenoPattern = /^[0-9]{10}$/;

        var city = document.forms[0]["city"].value;
        var cityPattern = /^[a-z,A-Z]{3,25}$/;

        if (!namePattern.test(name)) {
            alert("Enter full Name");
            return false;
        } else if (!emailPattern.test(email)) {
            alert("Invalid email");
            return false;
        } else if (!passwordPattern.test(password)) {
            alert("Enter a Strong Password");
            return false;
        } else if (!phonenoPattern.test(phoneno)) {
            alert("Invalid phone number");
            return false;
        } else if (!cityPattern.test(city)) {
            alert("Invalid city format");
            return false;
        } else {
            return true;
        }
    }
</script>
<!-- VALIDTION ENDS-->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
        crossorigin="anonymous"></script>
</body>
</html>